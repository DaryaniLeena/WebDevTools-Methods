(this["webpackJsonpweb-chat"]=this["webpackJsonpweb-chat"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(1),c=n.n(s),o=n(4),a=n.n(o),i=(n(10),n(2)),u=(n(11),n(12),function(e){var t=e.errorMsg,n=Object(s.useState)({}),c=Object(i.a)(n,2),o=c[0],a=c[1];Object(s.useEffect)((function(){fetch("/users").catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){a(e),t("")})).catch((function(e){t(e.error),console.log(e.error)}))}),[]);var u=Object.values(o).map((function(e){return Object(r.jsx)("li",{className:"sender-name-item",children:Object(r.jsx)("div",{children:Object(r.jsx)("span",{children:e.sender})})})}));return Object(r.jsx)("ul",{className:"user-list",children:u})});n(13);var j=function(e){var t=e.errorMsg,n=Object(s.useState)([]),c=Object(i.a)(n,2),o=c[0],a=c[1];return Object(s.useEffect)((function(){fetch("/messages").catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){a(e),t("")})).catch((function(e){t(e.error)}))}),[]),Object(r.jsx)("ol",{className:"all-user-messages",children:o.map((function(e,t){return Object(r.jsxs)("li",{className:"user-message",children:[Object(r.jsx)("div",{className:"sender-container",children:Object(r.jsx)("span",{className:"message-sender",children:e.sender})}),Object(r.jsxs)("div",{className:"message-text",children:[Object(r.jsx)("span",{children:e.text}),Object(r.jsx)("span",{className:"message-timestamp",children:e.timestamp})]})]},t)}))})},l=(n(14),n.p+"static/media/sendIcon.7bbe79a1.png");var h=function(e){var t=e.currentUser,n=e.errorMsg,c=Object(s.useState)(""),o=Object(i.a)(c,2),a=o[0],u=o[1],j=Object(s.useState)(!0),h=Object(i.a)(j,2),d=h[0],m=h[1];return Object(r.jsxs)("div",{className:"send-message",children:[Object(r.jsx)("input",{className:"user-input",onChange:function(e){u(e.target.value),m(!e.target.value||""===e.target.value.trim())},value:a,placeholder:"Enter message..."}),Object(r.jsx)("button",{className:"enter-msg-btn",disabled:d,onClick:function(){(function(e){var t=e.userName,n=e.message;return fetch("/message/"+t,{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({message:n})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?Promise.resolve(e):e.json().then((function(e){return Promise.reject(e)}))}))})({userName:t,message:a}).then((function(e){u(""),m(!0),n("")})).catch((function(e){n(e.error)}))},children:Object(r.jsx)("img",{class:"sendmessage-image",src:l})})]})},d=(n(15),function(e){var t=e.onLogin,n=e.errorMsg,c=Object(s.useState)(""),o=Object(i.a)(c,2),a=o[0],u=o[1],j=Object(s.useState)(!0),l=Object(i.a)(j,2),h=l[0],d=l[1];return Object(r.jsxs)("div",{className:"login-component",children:[Object(r.jsx)("div",{children:Object(r.jsxs)("label",{children:["UserName:",Object(r.jsx)("input",{className:"user-login-name",onChange:function(e){u(e.target.value),d(!e.target.value)},value:a})]})}),Object(r.jsx)("div",{class:"login-button",children:Object(r.jsx)("button",{class:"login",onClick:function(){(function(e){var t=e.username;return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:t})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})({username:a}).then((function(e){t({username:a,info:e.info}),n("")})).catch((function(e){n(e.error)}))},disabled:h,children:"Login"})})]})});n(16);var m=function(e){var t=e.performLogout;return Object(r.jsx)("div",{className:"logout-container",children:Object(r.jsx)("button",{className:"logout-button",onClick:t,children:"Logout"})})};var b=function(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(s.useState)(""),a=Object(i.a)(o,2),l=a[0],b=a[1],f=Object(s.useState)(""),O=Object(i.a)(f,2),g=O[0],v=O[1];Object(s.useEffect)((function(){fetch("/session",{method:"GET"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){c(!0),b(e),v("")})).catch((function(e){c(!1),v(e.err)}))}),[]);var x=function(e){v(e)};return Object(r.jsxs)("div",{children:[" ",n?Object(r.jsx)("div",{className:"chat-window-container",children:Object(r.jsxs)("div",{className:"chat-app",children:[Object(r.jsxs)("div",{className:"chat-header",children:[Object(r.jsx)("div",{className:"heading",children:Object(r.jsx)("div",{className:"title-conatiner",children:"Chat Application"})}),Object(r.jsx)("div",{className:"logout",children:Object(r.jsx)(m,{performLogout:function(){fetch("/session",{method:"DELETE"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){c(!1),b(""),v("")})).catch((function(e){v(e.err)}))}})})]}),Object(r.jsxs)("div",{className:"chat-content",children:[Object(r.jsx)("div",{className:"user-list-container",children:Object(r.jsx)(u,{errorMsg:x})}),Object(r.jsx)("div",{className:"message-list-container",children:Object(r.jsx)(j,{errorMsg:x})}),Object(r.jsx)("div",{className:"send-message-container",children:Object(r.jsx)(h,{currentUser:l,errorMsg:x})})]})]})}):Object(r.jsx)("div",{class:"login-container",children:Object(r.jsx)(d,{onLogin:function(e){var t=e.username;c(!0),b(t)},errorMsg:x})}),Object(r.jsx)("div",{class:"status-component",children:Object(r.jsx)("span",{class:"status",children:{"network-error":"Status: There was a problem connecting to the network, try again","bad-login":"Status: Bad-login: This value is not allowed","login-required":"Status: User must login","session-invalid":"This user session is not valid. Please login again."}[g]})})]})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),s(e),c(e),o(e)}))};a.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(b,{})}),document.getElementById("root")),f()}],[[17,1,2]]]);
//# sourceMappingURL=main.1c1ecd17.chunk.js.map